<!-- Table Operations -->
<div>
  <button nz-button nzType="default" nzShape="round" (click)="sortByAge()">Trier par âge</button>
  <button nz-button nzType="default" nzShape="round" (click)="resetFilters()">Réinitialiser les filtres</button>
  <button nz-button nzType="default" nzShape="round" (click)="resetSortAndFilters()">Tout réinitialiser</button>
</div>

<!-- Users Table -->
<nz-table
  #filterTable
  [nzData]="listOfData"
  nzTableLayout="fixed"
  [nzBordered]="false"
  [nzSize]="'middle'"
  [nzScroll]="{ x: '1000px' }"
  class="styled-table"
>
  <thead>
  <tr>
<!-- @for (column of listOfColumns; track column.name) {
      <th
        [(nzSortOrder)]="column.sortOrder"
        [nzSortFn]="column.sortFn"
        [nzFilters]="column.listOfFilter"
        [nzFilterFn]="column.filterFn"
      >
        {{ column.name }}
      </th>
    }-->
  </tr>
  </thead>
  <tbody>
    @for (data of filterTable.data; track data) {
      <tr>
        <td colspan="100%">
          <div class="user-card">
            <div nz-row class="user-row">
              <div nz-col nzSpan="18" class="user-details">
                <p><strong>ID:</strong> {{ data.id }}</p>
                <p><strong>Email:</strong> {{ data.email }}</p>
                <p><strong>Créé le:</strong> {{ data.createdAt | date: 'dd-MM-yyyy' }}</p>
              </div>
              <div nz-col nzSpan="6" class="user-actions">
                <button nz-button nzType="primary" nzSize="small" (click)="open(data)">
                  Voir Profil
                </button>
              </div>
            </div>
          </div>
        </td>
      </tr>
    }
  </tbody>
</nz-table>

<!-- Profile Drawer -->
<nz-drawer
  [nzVisible]="visible"
  [nzWidth]="500"
  [nzClosable]="false"
  (nzOnClose)="close()"
  [nzBodyStyle]="{ padding: '24px' }"
>
  <ng-container *nzDrawerContent>
    <div class="drawer-header">
      <h3>Profil de l'utilisateur</h3>
    </div>

    <div class="drawer-content">
      <div class="profile-field" *ngIf="profile?.lastname">
        <span class="label">Nom :</span>
        <span class="value">{{ profile.lastname }}</span>
      </div>

      <div class="profile-field">
        <span class="label">Prénom :</span>
        <span class="value">{{ profile.firstname }}</span>
      </div>

      <div class="profile-field">
        <span class="label">Téléphone :</span>
        <span class="value">{{ profile.number }}</span>
      </div>

      <div class="profile-field">
        <span class="label">Numéro de permis :</span>
        <span class="value">{{ profile.licenseNumber }}</span>
      </div>

      <div class="profile-field" *ngIf="licenseImage">
        <span class="label">Permis de conduire :</span><br />
        <img [src]="licenseImage" alt="Permis de conduire" class="license-image" />
      </div>


      <div class="drawer-footer">
        <button nz-button nzType="default" (click)="close()">Fermer</button>
      </div>

      <div class="field" *ngIf="licenseImage">
        <strong>Permis de conduire :</strong><br />
        <img [src]="licenseImage" alt="Permis de conduire" width="200" />
      </div>
    </div>
  </ng-container>
</nz-drawer>
