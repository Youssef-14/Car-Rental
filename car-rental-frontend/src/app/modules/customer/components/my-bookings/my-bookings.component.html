<div style="background-color: #f8f8f8; min-height: 91vh; padding: 24px;">
  <nz-spin [nzSpinning]="isSpinning">
    <div style="background-color: #fff; padding: 24px; border-radius: 10px;">
      <!-- CARDS LIST VIEW -->
      <div class="booking-card-container">
        <tr *ngIf="bookings.length === 0">
          <td colspan="1">
            <div class="empty-list-message">La liste est vide.</div>
          </td>
        </tr>
        <div
          class="booking-card"
          *ngFor="let booking of bookings"
        >
          <div class="booking-header">
            <div class="booking-status">
              <span class="status-label">{{ booking.bookCarStatus }}</span>
            </div>
            <div class="booking-id">
              <strong>ID:</strong> {{ booking.id }}
            </div>
          </div>

          <div class="booking-body">
            <p><strong>Véhicule :</strong> {{ booking.car.name }}</p>
            <p><strong>Depuis :</strong> {{ booking.fromDate | date: 'dd-MM-yyyy' }}</p>
            <p><strong>Jusqu'à :</strong> {{ booking.toDate | date: 'dd-MM-yyyy' }}</p>
            <p><strong>Nombre de jours :</strong> {{ booking.days }}</p>
            <p><strong>Prix total :</strong> {{ booking.price }} €</p>
          </div>

          <div class="booking-actions">
            <button nz-button nzType="primary" (click)="openCar(booking.car)">
              Détails de la véhicule
            </button>

            <button nz-button nzType="primary" (click)="openPopUpReclamation(booking.id)">
              Ajouter une Réclamation
            </button>

            <button
              *ngIf="isCancelable(booking)"
              nz-button
              nzType="default"
              (click)="cancelBooking(booking.id)"
              style="margin-left: 8px;"
            >
              <nz-icon nzType="close-circle" nzTheme="twotone" style="margin-right: 5px;"></nz-icon>
              Annuler
            </button>
          </div>
        </div>
      </div>
    </div>
  </nz-spin>

</div>

<!-- Updated Profile Drawer with detailed static content -->
<nz-drawer
  [nzVisible]="visibleCar"
  [nzWidth]="500"
  [nzClosable]="false"
  (nzOnClose)="closeCar()"
  [nzBodyStyle]="{ padding: '24px' }"
>
  <ng-container *nzDrawerContent>
    <div class="user-profile-drawer">
      <div class="drawer-header">
        <h3>Détails du véhicule</h3>
      </div>

      <div class="drawer-content">
        <div class="profile-field" *ngIf="car?.brand">
          <span class="label">Brand :</span>
          <span class="value">{{ car?.brand }}</span>
        </div>

        <div class="profile-field">
          <span class="label">Nom :</span>
          <span class="value">{{ car?.name }}</span>
        </div>

        <div class="profile-field">
          <span class="label">Année :</span>
          <span class="value">{{ car?.year }}</span>
        </div>

        <div class="profile-field">
          <span class="label">Transmission :</span>
          <span class="value">{{ car?.transmission }}</span>
        </div>

        <div class="profile-field" *ngIf="carImage">
          <span class="label">Image de la véhicule :</span>
          <img [src]="carImage" alt="Image de la véhicule" class="license-image" />
        </div>

        <div class="drawer-footer">
          <button nz-button nzType="default" (click)="closeCar()">Fermer</button>
        </div>
      </div>
    </div>
  </ng-container>
</nz-drawer>


<nz-modal
  [(nzVisible)]="isModalVisible"
  nzTitle="Ajouter une Réclamation"
  (nzOnCancel)="handleCancel()"
  (nzOnOk)="handleOk()"
  [nzOkDisabled]="!reclamationDescription || !reclamationDescription.trim().length"

>
  <textarea
    *nzModalContent
    rows="4"
    [(ngModel)]="reclamationDescription"
    style="width: 100%; resize: vertical; padding: 8px; border: 1px solid #d9d9d9; border-radius: 4px;"
    placeholder="Décrivez votre problème ici..."
  ></textarea>

</nz-modal>
